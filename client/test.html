<!DOCTYPE html>
<html>
<head>
  <title>Students Fetch</title>
  <style>
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #333;
      color: white;
      padding: 12px 18px;
      border-radius: 4px;
      opacity: 0;
      transition: opacity 0.4s ease;
    }
    .toast.show {
      opacity: 1;
    }
  </style>
</head>
<body>

  <h2>Students</h2>
  <div id="students"></div>

  <div id="toast" class="toast"></div>

  <script>
  function showToast(message) {
    const toast = document.getElementById('toast');
    toast.innerText = message;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2500);
  }

  async function fetchStudents() {
    try {
      const res = await fetch('https://mockflow-backend.onrender.com/mock/students');
      const data = await res.json();

      const container = document.getElementById('students');
      container.innerHTML = '';

      let list = [];

      if (Array.isArray(data)) {
        list = data;
      } else if (data.students && Array.isArray(data.students)) {
        list = data.students;
      } else {
        showToast('Invalid response format');
        return;
      }

      list.forEach(s => {
        const div = document.createElement('div');
        div.textContent = `${s.name} ${s.email}`;
        container.appendChild(div);
      });

      showToast('Students loaded');
    } catch (error) {
      console.error(error);
      showToast('Error fetching data');
    }
  }

  fetchStudents();
</script>


</body>
</html>
